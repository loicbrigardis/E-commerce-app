(window.webpackJsonpclient=window.webpackJsonpclient||[]).push([[0],{39:function(e,t,n){e.exports=n(94)},93:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),o=n.n(c),l=n(5),i=n(14),u=n(3),s=n(1),m="/api",p=function(){return void 0!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},d=n(6);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var E=function(e,t){var n=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(n=JSON.parse(localStorage.getItem("cart"))),n.push(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{count:1})),n=Array.from(new Set(n.map(function(e){return e._id}).map(function(e){return n.find(function(t){return t._id===e})}))),localStorage.setItem("cart",JSON.stringify(n)),t())},h=function(e,t){return e.location.pathname===t},g=Object(i.g)(function(e){var t=e.history,n=Object(a.useState)(!1),c=Object(u.a)(n,2),o=c[0],l=c[1];return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement(s.w,{style:{backgroundColor:"rgba(0, 0, 0, 0.85)"},dark:!0,expand:"md",scrolling:!0,fixed:"top"},r.a.createElement(s.x,{href:"/"},r.a.createElement("strong",null,"E-Books'")),r.a.createElement(s.z,{onClick:function(){return l(!o)}}),r.a.createElement(s.j,{navbar:!0,isOpen:o},r.a.createElement(s.y,{left:!0},r.a.createElement(s.u,{active:h(t,"/")},r.a.createElement(s.v,{to:"/"},"Home")),r.a.createElement(s.u,{className:"ml-2",active:h(t,"/shop")},r.a.createElement(s.v,{to:"/shop"},"Shop")),r.a.createElement(s.u,{className:"ml-2",active:h(t,"/cart")},r.a.createElement(s.v,{to:"/cart"},r.a.createElement("i",{className:"fas fa-shopping-cart"}),"Cart",r.a.createElement("span",{className:"badge badge-success ml-2"},"undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")).length:0)))),r.a.createElement(s.y,{right:!0},!p()&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.u,{active:h(t,"/signin")},r.a.createElement(s.v,{to:"/signin"},"Signin")),r.a.createElement(s.u,{active:h(t,"/signup")},r.a.createElement(s.v,{to:"/signup"},"Signup"))),p()&&0===p().user.role&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.u,{active:h(t,"/user/dashboard")},r.a.createElement(s.v,{to:"/user/dashboard"},"Dashboard"))),p()&&1===p().user.role&&r.a.createElement(s.u,{active:h(t,"/admin/dashboard")},r.a.createElement(s.v,{to:"/admin/dashboard"},"Admin Dashboard")),p()&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.u,null,r.a.createElement(s.l,null,r.a.createElement(s.o,{nav:!0,caret:!0},r.a.createElement(s.p,{icon:"user"})),r.a.createElement(s.n,{basic:!0,color:"info"},r.a.createElement(s.m,{onClick:function(){return function(e){if(void 0!==typeof window)return localStorage.removeItem("jwt"),e(),fetch("".concat(m,"/signout"),{method:"GET"}).then(function(e){console.log("signout",e)}).catch(function(e){return console.error(e)})}(function(){t.push("/")})}},"Signout"))))))))))}),b=function(e){var t=e.title,n=void 0===t?"Title":t,a=e.description,c=void 0===a?"description":a,o=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(g,null),r.a.createElement(s.k,{className:"text-center",fluid:!0},r.a.createElement(s.A,null,r.a.createElement(s.i,{style:{padding:0}},r.a.createElement(s.r,{style:{padding:0}},r.a.createElement(s.i,{className:"text-white effect2 text-center py-1 px-4 my-1",style:{backgroundSize:"cover",backgroundImage:"url(https://nordiclifescience.org/wp-content/public_html/2018/01/publication-e1516615172666.jpg)"}},r.a.createElement(s.i,{className:"py-4"},r.a.createElement(s.h,{className:"l-title h1-responsive pt-3 m-5 font-bold"},n),r.a.createElement("p",{className:"l-desc mx-5 mb-2"},c))))))),r.a.createElement(s.k,null,r.a.createElement(s.A,null,r.a.createElement(s.i,null,o))))},y=n(36),O=n.n(y),v=function(e){return fetch("".concat(m,"/products?sortBy=").concat(e,"&order=desc&limit=6"),{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})},j=function(){return fetch("".concat(m,"/categories"),{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})},w=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={limit:t,skip:e,filters:n};return fetch("".concat(m,"/products/by/search"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(a)}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})},N=n(18),S=n(19),P=n.n(S),k=n(37),x=n.n(k),C=function(e){var t=e.item,n=e.url;return r.a.createElement(s.f,{style:{backgroundSize:"cover"},className:"img-fluid",alt:t.name,src:"".concat(m,"/").concat(n,"/photo/").concat(t._id),waves:!0})},A=function(e){var t=e.product,n=e.refreshPage,c=e.isSingle,o=void 0!==c&&c,m=e.showAddToCartButton,p=void 0===m||m,d=e.cartUpdate,f=void 0!==d&&d,h=(e.showRemoveProductButton,Object(N.a)(e,["product","refreshPage","isSingle","showAddToCartButton","cartUpdate","showRemoveProductButton"]),Object(a.useState)(!1)),g=Object(u.a)(h,2),b=g[0],y=g[1],O=Object(a.useState)(t.count),v=Object(u.a)(O,2),j=v[0],w=v[1],S=function(){E(t,function(){y(!0)})},k=function(e,t){w(t<1?1:t),t>=1&&(!function(e,t){var n=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(n=JSON.parse(localStorage.getItem("cart"))),n.map(function(a,r){a._id===e&&(n[r].count=t)}),localStorage.setItem("cart",JSON.stringify(n)))}(e,t),n())},A=function(e){return f&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){!function(e){var t=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.map(function(n,a){n._id===e&&t.splice(a,1)}),localStorage.setItem("cart",JSON.stringify(t)))}(t._id),n()},type:"button",className:"btn btn-light btn-sm"},"Remove product"))};return r.a.createElement(s.d,{style:{maxWidth:"255px",margin:"0 auto"}},function(e){if(e)return r.a.createElement(i.a,{to:"/cart"})}(b),r.a.createElement(C,{item:t,url:"product"}),r.a.createElement(s.e,null,r.a.createElement(s.h,null,t.name),r.a.createElement(s.g,null,t.description.substring(0,100),"..."),r.a.createElement(s.g,null,t.price," \u20ac"),r.a.createElement(s.g,null,"Category: ",t.category&&t.category.name),r.a.createElement(s.g,null,"Added on ",P()(t.createdAt).fromNow()),function(e){return e>0?r.a.createElement(s.b,{className:"ml-2",color:"info"},"In stock"):r.a.createElement(s.b,{className:"ml-2",color:"warning"},"Not in stock")}(t.quantity),r.a.createElement("br",null),!o&&r.a.createElement(r.a.Fragment,null,r.a.createElement(s.c,{outline:!0,color:"info",size:"sm"},r.a.createElement(l.b,{color:"mdb-color",size:"sm",to:"/product/".concat(t._id)},"More infos"))),function(e){if(e&&t.quantity>0)return r.a.createElement(s.c,{className:"float-right",onClick:S,size:"sm",color:"indigo",href:""},r.a.createElement(s.p,{icon:"shopping-cart"}))}(p),function(e){return e&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",{className:"mb-3"},"Quantity"),r.a.createElement(x.a,{maxValue:20,minValue:1,value:j,onChange:function(e){return k(t._id,e)}}),r.a.createElement("br",null))}(f),A()))};function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var T=function(){var e=Object(a.useState)({categories:[],category:"",search:"",results:[],searched:!1}),t=Object(u.a)(e,2),n=t[0],c=t[1],o=n.categories,l=n.category,i=n.search,p=n.results,f=n.searched;Object(a.useEffect)(function(){j().then(function(e){e.err?console.log(e.err):c(F({},e,{categories:e}))})},[]);var E=function(){i&&function(e){var t=O.a.stringify(e);return fetch("".concat(m,"/products/search?").concat(t),{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})}({search:i||void 0,category:l}).then(function(e){e.err?console.log(e.err):c(F({},n,{results:e,searched:!0}))})},h=function(e){e.preventDefault(),E()},g=function(e){return function(t){var a;c(F({},n,(a={},Object(d.a)(a,e,t.target.value),Object(d.a)(a,"searched",!1),a)))}},b=function(e,t){return e&&t.length<=0?r.a.createElement("p",{className:"ml-3"},"No result found"):e&&t.length>0?r.a.createElement("p",{className:"ml-3"},r.a.createElement("b",null,t.length," results")," found"):void 0};return r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(s.A,null,r.a.createElement(s.d,{className:"card-body",style:{width:"22rem",margin:"15px"}},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("select",{style:{width:"25%"},className:"browser-default custom-select",onChange:g("category")},r.a.createElement("option",{value:"All"},"All categories"),o.map(function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.name)})),r.a.createElement("form",{style:{width:"60%",paddingLeft:"2%"},onSubmit:h},r.a.createElement("div",{className:"form-group mb-0"},r.a.createElement("input",{type:"text",className:"form-control",id:"search","aria-describedby":"search",placeholder:"Search a book",onChange:g("search")}))),r.a.createElement("div",{className:"ml-3"},r.a.createElement(s.c,{style:{height:"38px",borderRadius:"5px",paddingTop:"0.5rem"},outline:!0,onClick:h,color:"primary",className:"m-0"},"Search"))))),r.a.createElement(s.A,null,r.a.createElement(s.i,null,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r.a.createElement(r.a.Fragment,null,b(f,p),r.a.createElement(s.A,null,e.map(function(e,t){return r.a.createElement(s.i,{key:t,sm:"12",md:"4",lg:"3",className:"mb-5"},r.a.createElement(A,{product:e}))})))}(p)))))},_=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),l=Object(u.a)(o,2),i=l[0],m=l[1],p=Object(a.useState)(!1),d=Object(u.a)(p,2),f=d[0],E=d[1];return Object(a.useEffect)(function(){v("sold").then(function(e){e.err?E(e.err):c(e)}),v("createdAt").then(function(e){e.err?E(e.err):m(e)})},[]),r.a.createElement(b,{title:"E-Books everywhere",description:"Expand your imagination"},r.a.createElement(T,null),f?r.a.createElement("p",null,f):"",r.a.createElement("h2",null,"New Arrivals Sellers"),r.a.createElement(s.A,null,i.map(function(e,t){return r.a.createElement(s.i,{key:t,sm:"12",md:"4",lg:"3",className:"mb-5"},r.a.createElement(A,{product:e}))})),r.a.createElement("h2",null,"Best Sellers"),r.a.createElement(s.A,null,n.map(function(e,t){return r.a.createElement(s.i,{key:t,sm:"12",md:"4",lg:"3",className:"mb-5"},r.a.createElement(A,{product:e}))})))};function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var q=function(){var e=Object(a.useState)({email:"",password:"",error:"",loading:!1,redirectToReferrer:!1}),t=Object(u.a)(e,2),n=t[0],c=t[1],o=p().user,l=n.email,f=n.password,E=n.error,h=n.loading,g=n.redirectToReferrer,y=function(e){c(B({},n,Object(d.a)({error:!1},e.target.name,e.target.value)))},O=function(e){e.preventDefault(),c(B({},n,{error:[],loading:!0})),function(e){return fetch("".concat(m,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})}({email:l,password:f}).then(function(e){e.err?c(B({},n,{error:e.err,loading:!1})):function(e,t){void 0!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,function(){c(B({},n,{redirectToReferrer:!0}))})})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{title:"Signin",description:"Best Ebooks E-commerce site"},h&&r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")),r.a.createElement(s.A,{center:!0},r.a.createElement(s.i,{md:"6"},r.a.createElement("form",null,r.a.createElement("p",{className:"h4 text-center mb-4"},"Welcome, ready to read a good book?"),E?E.map(function(e,t){return r.a.createElement(s.a,{color:"danger",key:t},e.msg)}):"",r.a.createElement("label",{htmlFor:"email",className:"grey-text"},"Your email"),r.a.createElement("input",{type:"email",id:"email",name:"email",className:"form-control",value:l,onChange:function(e){return y(e)}}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"password",className:"grey-text"},"Your password"),r.a.createElement("input",{type:"password",id:"password",name:"password",className:"form-control",value:f,onChange:function(e){return y(e)}}),r.a.createElement("div",{className:"text-center mt-4"},r.a.createElement(s.c,{color:"unique",type:"submit",onClick:O},"Signin"))))),function(){if(g)return o&&1===o.role?r.a.createElement(i.a,{to:"/admin/dashboard"}):r.a.createElement(i.a,{to:"/"})}(),r.a.createElement(s.A,{center:!0},r.a.createElement(s.i,{md:"6"},r.a.createElement("div",{className:"text-center mt-4"},r.a.createElement(s.c,{color:"primary",onClick:function(){return c({email:"111111@111111.com",password:"111111"})}},"User"),r.a.createElement(s.c,{color:"primary",onClick:function(){return c({email:"000000@000000.com",password:"000000"})}},"Admin"))))))};function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var G=function(){var e=Object(a.useState)({name:"",email:"",password:"",error:[],success:!1}),t=Object(u.a)(e,2),n=t[0],c=t[1],o=n.name,i=n.email,p=n.password,f=n.error,E=n.success,h=function(e){c(J({},n,Object(d.a)({error:!1},e.target.name,e.target.value)))},g=function(e){var t;e.preventDefault(),(t={name:o,email:i,password:p},fetch("".concat(m,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})).then(function(e){e.err?c(J({},n,{error:e.err,success:!1})):c(J({},n,{name:"",email:"",password:"",error:"",success:!0}))})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{title:"Signup",description:"Signup to E-commerce site"},r.a.createElement("div",{style:{display:E?"block":"none"}},r.a.createElement(s.a,{color:"info"},"New account created. Please ",r.a.createElement(l.b,{to:"/signin"},"Signin"))),r.a.createElement(s.A,{center:!0},r.a.createElement(s.i,{md:"6"},r.a.createElement("form",null,r.a.createElement("p",{className:"h4 text-center mb-4"},"Sign up"),r.a.createElement("label",{htmlFor:"name",className:"grey-text"},"Your name"),r.a.createElement("input",{type:"text",id:"name",className:f.hasOwnProperty("name")?"form-control is-invalid":"form-control",name:"name",value:o,onChange:function(e){return h(e)}}),f&&f.name?f.name.map(function(e,t){return r.a.createElement("div",{className:"invalid-feedback",key:t},e.msg)}):"",r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"email",className:"grey-text"},"Your email"),r.a.createElement("input",{type:"email",id:"email",className:f.hasOwnProperty("email")?"form-control is-invalid":"form-control",name:"email",value:i,onChange:function(e){return h(e)}}),f&&f.email?f.email.map(function(e,t){return r.a.createElement("div",{className:"invalid-feedback",key:t},e.msg)}):"",r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"password",className:"grey-text"},"Your password"),r.a.createElement("input",{type:"password",id:"password",name:"password",className:f.hasOwnProperty("password")?"form-control is-invalid":"form-control",value:p,onChange:function(e){return h(e)}}),f&&f.password?f.password.map(function(e,t){return r.a.createElement("div",{className:"invalid-feedback",key:t},e.msg)}):"",r.a.createElement("div",{className:"text-center mt-4"},r.a.createElement(s.c,{color:"unique",type:"submit",onClick:g},"Signup")))))))},U=function(e){var t=e.component,n=Object(N.a)(e,["component"]);return r.a.createElement(i.b,Object.assign({},n,{render:function(e){return p()?r.a.createElement(t,e):r.a.createElement(i.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},L=function(e){var t=e.component,n=Object(N.a)(e,["component"]);return r.a.createElement(i.b,Object.assign({},n,{render:function(e){return p()&&1===p().user.role?r.a.createElement(t,e):r.a.createElement(i.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},R=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],o=p().user,i=o._id,d=o.name,f=o.userEmail,E=o.role,h=p().token,g=function(e,t){(function(e,t){return fetch("".concat(m,"/orders/by/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})})(e,t).then(function(e){e.error?console.log(e.error):c(e)})};Object(a.useEffect)(function(){g(i,h)},[i,h]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{title:"Dashboard",description:"Nice to see you ".concat(d)},r.a.createElement(s.A,{className:"mb-5"},r.a.createElement(s.i,{size:"4"},r.a.createElement(s.d,null,r.a.createElement(s.f,{className:"img-fluid",src:"https://mdbootstrap.com/img/Photos/Others/images/43.jpg",waves:!0}),r.a.createElement(s.e,null,r.a.createElement(s.h,null,"User Links"),r.a.createElement(s.s,null,r.a.createElement(s.t,null,r.a.createElement(l.b,{to:"/cart"},"My Cart")),r.a.createElement(s.t,null,r.a.createElement(l.b,{to:"/profile/".concat(i)},"Update profile")))),r.a.createElement(s.e,null,r.a.createElement(s.h,null,"User informations"),r.a.createElement(s.s,null,r.a.createElement(s.t,null,"Name: ",r.a.createElement("b",null,d)),r.a.createElement(s.t,null,"Email: ",r.a.createElement("b",null,f)),r.a.createElement(s.t,null,"Role: ",r.a.createElement("b",null,1===E?"Admin":"Registered user")))))),r.a.createElement(s.i,{size:"8"},r.a.createElement("h1",null,"Purchase history"),r.a.createElement(s.B,null,r.a.createElement(s.D,null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Date"))),n.map(function(e,t){return e.products.map(function(t,n){return r.a.createElement(s.C,{key:n},r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.price," \u20ac"),r.a.createElement("td",null,P()(e.createdAt).fromNow())))})}))))))},Y=function(){var e=p().user,t=e._id,n=e.name,a=e.userEmail,c=e.role;return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{title:"Admin Dashboard",description:"Nice to see you ".concat(n)},r.a.createElement(s.A,{className:"mb-5"},r.a.createElement(s.i,{size:"4"},r.a.createElement(s.d,null,r.a.createElement(s.f,{className:"img-fluid",src:"https://mdbootstrap.com/img/Photos/Others/images/43.jpg",waves:!0}),r.a.createElement(s.e,null,r.a.createElement(s.h,null,"Admin Links"),r.a.createElement(s.s,null,r.a.createElement(s.t,null,r.a.createElement(l.b,{to:"/category/create"},"Create category")),r.a.createElement(s.t,null,r.a.createElement(l.b,{to:"/product/create/".concat(t)},"Create product")),r.a.createElement(s.t,null,r.a.createElement(l.b,{to:"/admin/orders"},"View orders")),r.a.createElement(s.t,null,r.a.createElement(l.b,{to:"/admin/products"},"Manage products")))),r.a.createElement(s.e,null,r.a.createElement(s.h,null,"User informations"),r.a.createElement(s.s,null,r.a.createElement(s.t,null,"Name: ",r.a.createElement("b",null,n)),r.a.createElement(s.t,null,"Email: ",r.a.createElement("b",null,a)),r.a.createElement(s.t,null,"Role: ",r.a.createElement("b",null,1===c?"Admin":"Registered user")))))))))},M=function(){return fetch("".concat(m,"/categories"),{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})},W=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),i=Object(u.a)(o,2),d=i[0],f=i[1],E=Object(a.useState)(!1),h=Object(u.a)(E,2),g=h[0],y=h[1],O=p(),v=O.user,j=O.token,w=function(e){f(!1),c(e.target.value)},N=function(e){e.preventDefault(),function(e,t,n){return fetch("".concat(m,"/category/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(n)}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})}(v._id,j,{name:n}).then(function(e){e.err?(y(!1),f(!0)):(f(!1),y(!0))})},S=function(){return r.a.createElement(l.b,{to:"/admin/dashboard"},"Back to Dashboard")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{title:"Category",description:"Create a new category"},function(){if(g)return r.a.createElement(s.a,{color:"success"},n," is created!")}(),function(){if(d)return r.a.createElement(s.a,{color:"danger"},"Category ",n," already exist!")}(),r.a.createElement(s.A,{center:!0},r.a.createElement(s.i,{md:"6"},r.a.createElement("form",{onSubmit:N},r.a.createElement("label",{htmlFor:"name",className:"grey-text"},"Category name"),r.a.createElement("input",{type:"text",id:"name",className:d?"form-control is-invalid":"form-control",minLength:"2",value:n,onChange:w,autoFocus:!0,required:!0}),r.a.createElement("div",{className:"text-center mt-4"},r.a.createElement(s.c,{color:"indigo",type:"submit"},"Create category")),r.a.createElement("div",{className:"text-center mt-4"},S()))))))};function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var H=function(){var e=p(),t=e.user,n=e.token,c=Object(a.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:"",error:"",createdProduct:"",redirectToProfile:!1,formData:""}),o=Object(u.a)(c,2),l=o[0],i=o[1],f=l.name,E=l.description,h=l.price,g=l.categories,y=l.photo,O=l.quantity,v=l.loading,j=l.error,w=l.createdProduct,N=l.formData;Object(a.useEffect)(function(){M().then(function(e){e.err?i(V({},l,{error:e.err})):i(V({},l,{categories:e,formData:new FormData}))})},[]);var S=function(e){var t="photo"===e.target.name?e.target.files[0]:e.target.value;N.set([e.target.name],t),i(V({},l,Object(d.a)({},e.target.name,t)))},P=function(e){e.preventDefault(),i(V({},l,{error:"",loading:!0})),function(e,t,n){return fetch("".concat(m,"/product/create/").concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:n}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})}(t._id,n,N).then(function(e){e.err?i(V({},l,{error:e.err})):i(V({},l,{name:"",description:"",price:"",category:"",shipping:"",quantity:"",photo:"",loading:!1,error:"",createdProduct:e.name}))})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{title:"Product",description:"Create a new product"},function(){if(v)return r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))}(),function(){if(w)return r.a.createElement(s.a,{color:"success"},w," is created")}(),function(){if(j)return console.log(j),r.a.createElement(s.a,{color:"danger"},j[0].msg)}(),r.a.createElement(s.A,{center:!0},r.a.createElement(s.i,{md:"6"},r.a.createElement("form",{onSubmit:P},r.a.createElement("label",{htmlFor:"name",className:"grey-text"},"Name"),r.a.createElement("input",{type:"text",id:"name",name:"name",className:j?"form-control is-invalid":"form-control",minLength:"2",value:f,onChange:S,autoFocus:!0,required:!0}),r.a.createElement("label",{htmlFor:"description",className:"grey-text"},"Description"),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"basic-addon"},r.a.createElement("i",{className:"fas fa-pencil-alt prefix"}))),r.a.createElement("textarea",{className:j?"form-control is-invalid":"form-control",id:"description",name:"description",minLength:"2",rows:"5",value:E,onChange:S,required:!0})),r.a.createElement("label",{htmlFor:"price",className:"grey-text"},"Price"),r.a.createElement("input",{type:"number",id:"price",name:"price",min:"1",className:j?"form-control is-invalid":"form-control",value:h,onChange:S,required:!0}),r.a.createElement("br",null),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"choose-photo"},r.a.createElement(s.p,{icon:"file-upload"}))),r.a.createElement("div",{className:"custom-file"},r.a.createElement("input",{type:"file",className:"custom-file-input","aria-describedby":"choose-photo",name:"photo",id:"photo",accept:"image/*",onChange:S}),r.a.createElement("label",{className:"custom-file-label",htmlFor:"inputGroupFile01"},y?y.name:"Choose a photo"))),r.a.createElement("label",{htmlFor:"category",className:"grey-text"},"Category"),r.a.createElement("div",null,r.a.createElement("select",{className:"browser-default custom-select",onChange:S,name:"category",id:"category"},r.a.createElement("option",null,"Choose your category"),g&&g.map(function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.name)}))),r.a.createElement("label",{htmlFor:"quantity",className:"grey-text"},"Quantity"),r.a.createElement("input",{type:"number",id:"quantity",name:"quantity",className:j?"form-control is-invalid":"form-control",min:"1",value:O,onChange:S,required:!0}),r.a.createElement("label",{htmlFor:"shipping",className:"grey-text"},"Shipping"),r.a.createElement("div",null,r.a.createElement("select",{className:"browser-default custom-select",onChange:S,name:"shipping",id:"shipping"},r.a.createElement("option",null,"Do you want shipping ?"),r.a.createElement("option",{value:"0"},"No"),r.a.createElement("option",{value:"1"},"Yes"))),r.a.createElement("div",{className:"text-center mt-4"},r.a.createElement(s.c,{color:"indigo",type:"submit"},"Create product")))))))};function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var X=function(e){var t=e.match,n=p(),c=n.user,o=n.token,l=Object(a.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:"",error:"",createdProduct:"",redirectToProfile:!1,formData:""}),f=Object(u.a)(l,2),E=f[0],h=f[1],g=E.name,y=E.description,O=E.price,v=E.categories,j=E.photo,w=E.quantity,N=E.loading,S=E.error,P=E.createdProduct,k=E.redirectToProfile,x=E.formData,C=function(e){(function(e){return fetch("".concat(m,"/product/").concat(e),{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})})(e).then(function(e){e.err?h(K({},E,{error:e.err})):(h(K({},E,{name:e.name,description:e.description,price:e.price,category:e.category._id,shipping:e.shipping,quantity:e.quantity,formData:new FormData})),M().then(function(e){e.err?h(K({},E,{error:e.err})):h({categories:e,formData:new FormData})}))})};Object(a.useEffect)(function(){C(t.params.productId)},[]);var A=function(e){var t="photo"===e.target.name?e.target.files[0]:e.target.value;x.set([e.target.name],t),h(K({},E,Object(d.a)({},e.target.name,t)))},D=function(e){e.preventDefault(),h(K({},E,{error:"",loading:!0})),function(e,t,n,a){return fetch("".concat(m,"/product/").concat(e,"/").concat(t),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(n)},body:a}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})}(t.params.productId,c._id,o,x).then(function(e){e.err?h(K({},E,{error:e.err})):h(K({},E,{name:"",description:"",price:"",category:"",shipping:"",quantity:"",photo:"",loading:!1,error:!1,redirectToProfile:!0,createdProduct:e.name}))})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(b,{title:"Product",description:"Create a new product"},function(){if(N)return r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))}(),function(){if(P)return r.a.createElement(s.a,{color:"success"},P," is updated")}(),function(){if(S)return console.log(S),r.a.createElement(s.a,{color:"danger"},S[0].msg)}(),r.a.createElement(s.A,{center:!0},r.a.createElement(s.i,{md:"6"},r.a.createElement("form",{onSubmit:D},r.a.createElement("label",{htmlFor:"name",className:"grey-text"},"Name"),r.a.createElement("input",{type:"text",id:"name",name:"name",className:S?"form-control is-invalid":"form-control",minLength:"2",value:g,onChange:A,autoFocus:!0,required:!0}),r.a.createElement("label",{htmlFor:"description",className:"grey-text"},"Description"),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"basic-addon"},r.a.createElement("i",{className:"fas fa-pencil-alt prefix"}))),r.a.createElement("textarea",{className:S?"form-control is-invalid":"form-control",id:"description",name:"description",minLength:"2",rows:"5",value:y,onChange:A,required:!0})),r.a.createElement("label",{htmlFor:"price",className:"grey-text"},"Price"),r.a.createElement("input",{type:"number",id:"price",name:"price",min:"1",className:S?"form-control is-invalid":"form-control",value:O,onChange:A,required:!0}),r.a.createElement("br",null),r.a.createElement("div",{className:"input-group"},r.a.createElement("div",{className:"input-group-prepend"},r.a.createElement("span",{className:"input-group-text",id:"choose-photo"},r.a.createElement(s.p,{icon:"file-upload"}))),r.a.createElement("div",{className:"custom-file"},r.a.createElement("input",{type:"file",className:"custom-file-input","aria-describedby":"choose-photo",name:"photo",id:"photo",accept:"image/*",onChange:A}),r.a.createElement("label",{className:"custom-file-label",htmlFor:"inputGroupFile01"},j?j.name:"Choose a photo"))),r.a.createElement("label",{htmlFor:"category",className:"grey-text"},"Category"),r.a.createElement("div",null,r.a.createElement("select",{className:"browser-default custom-select",onChange:A,name:"category",id:"category"},r.a.createElement("option",null,"Choose your category"),v&&v.map(function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.name)}))),r.a.createElement("label",{htmlFor:"quantity",className:"grey-text"},"Quantity"),r.a.createElement("input",{type:"number",id:"quantity",name:"quantity",className:S?"form-control is-invalid":"form-control",min:"1",value:w,onChange:A,required:!0}),r.a.createElement("label",{htmlFor:"shipping",className:"grey-text"},"Shipping"),r.a.createElement("div",null,r.a.createElement("select",{className:"browser-default custom-select",onChange:A,name:"shipping",id:"shipping"},r.a.createElement("option",null,"Do you want shipping ?"),r.a.createElement("option",{value:"0"},"No"),r.a.createElement("option",{value:"1"},"Yes"))),r.a.createElement("div",{className:"text-center mt-4"},r.a.createElement(s.c,{color:"indigo",type:"submit"},"Update product"))))),function(){if(k&&!S)return r.a.createElement(i.a,{to:"/"})}()))},Z=n(20),ee=function(e){var t=e.categories,n=e.handleFilters,c=Object(a.useState)([]),o=Object(u.a)(c,2),l=o[0],i=o[1],s=function(e){return function(){var t=l.indexOf(e),a=Object(Z.a)(l);-1===t?a.push(e):a.splice(t,1),i(a),n(a)}};return t.map(function(e,t){return r.a.createElement("li",{key:t,style:{listStyle:"none"}},r.a.createElement("input",{onChange:s(e._id),className:"styled-checkbox",id:"styled-checkbox-".concat(t),value:l.indexOf(-1===e._id),type:"checkbox"}),r.a.createElement("label",{htmlFor:"styled-checkbox-".concat(t)},e.name))})},te=function(e){var t=e.prices,n=e.handleFilters,c=Object(a.useState)(0),o=Object(u.a)(c,2),l=(o[0],o[1]),i=function(e){n(e.target.value),l(e.target.value)};return t.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("input",{onChange:i,name:"styled-radio",id:"styled-radiobox-".concat(t),className:"styled-radio",value:e._id,type:"radio"}),r.a.createElement("label",{htmlFor:"styled-radiobox-".concat(t),className:"ml-2"},e.name))})},ne=[{_id:0,name:"Any",array:[]},{_id:1,name:"0 to 9\u20ac",array:[0,9]},{_id:2,name:"10 to 19\u20ac",array:[10,19]},{_id:3,name:"20 to 29\u20ac",array:[20,29]},{_id:4,name:"30 to 39\u20ac",array:[30,39]},{_id:5,name:"More than 40\u20ac",array:[40,99]}];function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}var re=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),l=Object(u.a)(o,2),i=l[0],m=l[1],p=Object(a.useState)(6),f=Object(u.a)(p,1)[0],E=Object(a.useState)(0),h=Object(u.a)(E,2),g=h[0],y=h[1],O=Object(a.useState)(0),v=Object(u.a)(O,2),N=v[0],S=v[1],P=Object(a.useState)([]),k=Object(u.a)(P,2),x=k[0],C=k[1],D=Object(a.useState)({filters:{category:[],price:[]}}),F=Object(u.a)(D,2),T=F[0],_=F[1],I=function(e){w(g,f,e).then(function(e){e.err?m(e.err):(C(e.products),S(e.size),y(0))})},B=function(){var e=g+f;w(e,f,T.filters).then(function(t){t.err?m(t.err):(C([].concat(Object(Z.a)(x),Object(Z.a)(t.products))),S(t.size),y(e))})};Object(a.useEffect)(function(){j().then(function(e){e.err?m(e.err):c(e)}),I(g,T.filters)},[]);var q=function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},T);if(n.filters[t]=e,"price"===t){var a=z(e);n.filters[t]=a}I(T.filters),_(n)},z=function(e){var t=ne,n=[];for(var a in t)t[a]._id===parseInt(e)&&(n=t[a].array);return n};return r.a.createElement(b,{title:"Shop page",description:"Search book of your choice"},r.a.createElement(s.A,null,r.a.createElement(s.i,{md:"2"},i?r.a.createElement("p",null,i):"",r.a.createElement("h4",null,"Filter by categories"),r.a.createElement("ul",{className:"pl-0"},r.a.createElement(ee,{categories:n,handleFilters:function(e){return q(e,"category")}})),r.a.createElement("h4",null,"Filter by price range"),r.a.createElement("ul",{className:"pl-0"},r.a.createElement(te,{prices:ne,handleFilters:function(e){return q(e,"price")}}))),r.a.createElement(s.i,{md:"10"},r.a.createElement("h2",null,"Products"),r.a.createElement(s.A,{center:!0},x.map(function(e,t){return r.a.createElement(s.i,{key:t,size:"12",xs:"10",sm:"10",md:"6",lg:"4",className:"mb-5"},r.a.createElement(A,{product:e}))})),N>0&&N>=f&&r.a.createElement(s.c,{onClick:B,color:"primary"},"Load more"))))},ce=function(e){var t=Object(a.useState)({}),n=Object(u.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)(!1),i=Object(u.a)(l,2),p=i[0],d=i[1],f=Object(a.useState)([]),E=Object(u.a)(f,2),h=E[0],g=E[1],y=function(e){(function(e){return fetch("".concat(m,"/product/").concat(e),{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})})(e).then(function(e){e.err?d(e.err):(o(e),function(e){return fetch("".concat(m,"/products/related/").concat(e),{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})}(e._id).then(function(e){e.err?d(e.err):g(e)}))})};return Object(a.useEffect)(function(){var t=e.match.params.id;y(t)},[e]),r.a.createElement(b,{title:c.name,description:c&&c.description&&c.description.substring(0,100)},r.a.createElement(s.A,null,r.a.createElement(s.i,{md:"8"},r.a.createElement("h2",null,"Product"),c&&c.description&&c.description&&r.a.createElement(A,{product:c,isSingle:!0})),r.a.createElement(s.i,{md:"4"},r.a.createElement("h4",null,"Related product"),p?r.a.createElement("p",null,p):"",h.map(function(e,t){return r.a.createElement(A,{key:t,product:e})}))))},oe=n(38),le=n.n(oe);function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var se=function(e){var t=e.products,n=Object(a.useState)({loading:!1,success:!1,clientToken:null,error:"",instance:{},address:""}),c=Object(u.a)(n,2),o=c[0],i=c[1],d=p()&&p().user._id,f=p()&&p().token,E=function(e,t){(function(e,t){return fetch("".concat(m,"/braintree/getToken/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})})(e,t).then(function(e){"undefined"===e?i(ue({},e,{error:"Can not load token"})):(console.log("access token"),i({clientToken:e.clientToken}))})};Object(a.useEffect)(function(){E(d,f)},[]);var h=function(){return t.reduce(function(e,t){return e+t.count*t.price},0)},g=o.address,b=function(){i({loading:!0});o.instance.requestPaymentMethod().then(function(e){var n={paymentMethodNonce:e.nonce,amount:h()};(function(e,t,n){return fetch("".concat(m,"/braintree/payment/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(n)}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})})(d,f,n).then(function(n){var a,r={products:t,transaction_id:n.transaction.id,amount:n.transaction.amount,address:g};!function(e,t,n){fetch("".concat(m,"/order/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({order:n})}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})}(d,f,r),i(ue({},e,{success:n.success})),a=function(){i({loading:!1,success:!0})},"undefined"!==typeof window&&(localStorage.removeItem("cart"),a())}).catch(function(e){console.log(e)})}).catch(function(e){i(ue({},o,{error:e.message})),i({loading:!1}),console.error(e)})},y=function(e){i(ue({},o,{address:e.target.value}))},O=function(){return r.a.createElement("div",{onBlur:function(){return i(ue({},o,{error:""}))}},null!==o.clientToken&&t.length>0?r.a.createElement("div",null,r.a.createElement(s.q,{onChange:y,type:"textarea",label:"Your delivery address:",background:!0}),r.a.createElement(le.a,{options:{authorization:o.clientToken,paypal:{flow:"vault"}},onInstance:function(e){return i(ue({},o,{instance:e}))}}),r.a.createElement(s.c,{onClick:b,className:"btn-block",color:"success"},"Pay")):null)};return r.a.createElement("div",null,r.a.createElement("h2",null,"Total: ",h()," \u20ac"),function(e){if(e)return r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))}(o.loading),function(e){if(e)return r.a.createElement(s.a,{color:"danger"}," ",e," ")}(o.error),function(e){if(e)return r.a.createElement(s.a,{color:"info"}," Thanks! your payment was successfull ")}(o.success),p()?r.a.createElement("div",null,O()):r.a.createElement(l.b,{to:"signin"},r.a.createElement("button",{type:"button",className:"btn btn-primary"},"Sign in to Checkout")))},me=function(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(0),m=Object(u.a)(i,2),p=m[0],d=m[1];Object(a.useEffect)(function(){o("undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[])},[p]);var f=function(){d(Math.random())};return r.a.createElement(b,{title:"Shopping Cart",description:"Manage your cart items. Add remove or continue shopping"},r.a.createElement(s.A,null,r.a.createElement(s.i,{md:"6"},c.length>0?function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Your cart has ","".concat(e.length)," items"),r.a.createElement("hr",null),e.map(function(e,t){return r.a.createElement(A,{key:t,product:e,showAddToCartButton:!1,showRemoveProductButton:!0,cartUpdate:!0,refreshPage:f})}))}(c):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Your cart is empty")," ",r.a.createElement("br",null),r.a.createElement(l.b,{to:"/shop"},"Continue shopping"))),r.a.createElement(s.i,{md:"6"},r.a.createElement(se,{products:c}))))},pe=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),l=Object(u.a)(o,2),i=l[0],d=l[1],f=p(),E=f.user,h=f.token,g=function(){(function(e,t){return fetch("".concat(m,"/order/list/").concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})})(E._id,h).then(function(e){e.err?console.log(e.err):c(e)})},y=function(){(function(e,t){return fetch("".concat(m,"/order/status-values/").concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})})(E._id,h).then(function(e){e.err?console.log(e.err):d(e)})};Object(a.useEffect)(function(){g(),y()},[]);var O=function(e,t){return r.a.createElement("td",null,e," : ",r.a.createElement("input",{type:"text",value:t,readOnly:!0}))},v=function(e,t){(function(e,t,n,a){return fetch("".concat(m,"/order/").concat(n,"/status/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({status:a,orderId:n})}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})})(E._id,h,t,e.target.value).then(function(e){e.err?console.log("Status update failed"):g()})};return r.a.createElement(b,{title:"Orders",description:"MLanage orders"},n.length>0?r.a.createElement("h1",null,"Total orders: ",n.length):r.a.createElement("h1",null,"No orders"),r.a.createElement(s.B,{hover:!0},r.a.createElement(s.D,null,r.a.createElement("tr",null,r.a.createElement("th",null,"Order ID"),r.a.createElement("th",null,"Status"),r.a.createElement("th",null,"Transaction ID"),r.a.createElement("th",null,"Amount"),r.a.createElement("th",null,"Ordered By"),r.a.createElement("th",null,"Ordered On"),r.a.createElement("th",null,"Address"))),n.map(function(e,t){return r.a.createElement(s.C,{key:t,style:{borderTop:"3px solid black"}},r.a.createElement("tr",{style:{background:"lightblue"}},r.a.createElement("td",null,e._id),r.a.createElement("td",null,function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,e.status),r.a.createElement("select",{name:"status",id:"status",onChange:function(t){return v(t,e._id)}},r.a.createElement("option",{value:e.status},"Update Status"),i.map(function(e,t){return r.a.createElement("option",{key:t,value:e},e)})))}(e)),r.a.createElement("td",null,e.transaction_id),r.a.createElement("td",null,e.amount," \u20ac"),r.a.createElement("td",null,e.user.name),r.a.createElement("td",null,P()(e.createdAt).fromNow()),r.a.createElement("td",null,e.address)),r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"7",align:"center"},r.a.createElement("b",null,"Total products in the order : ",e.products.length))),e.products.map(function(e,t){return r.a.createElement("tr",{key:t,style:{background:"#eee"}},O("Product name",e.name),O("Product price",e.price),O("Product total",e.count),O("Product Id",e._id),r.a.createElement("td",{colSpan:"3"}))}))})))},de=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],o=p(),i=o.user,d=o.token,f=function(){fetch("".concat(m,"/products?limit=100"),{method:"GET"}).then(function(e){return e.json()}).catch(function(e){return console.error(e)}).then(function(e){e.err?console.log(e.err):c(e)})};Object(a.useEffect)(function(){f()},[]);var E=function(e){window.confirm("Are you sure you want delete this product?")&&function(e,t,n){return fetch("".concat(m,"/product/").concat(e,"/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)}}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})}(e,i._id,d).then(function(e){e.err?console.log(e.err):f()})};return r.a.createElement(b,{title:"Manage products",description:"Perform CRUD on products"},r.a.createElement("h2",null,"Manage products"),r.a.createElement(s.A,null,r.a.createElement(s.i,null,r.a.createElement("h2",null,"Total products : ",n.length),r.a.createElement(s.s,null,n.map(function(e,t){return r.a.createElement(s.t,{key:t},e.name,r.a.createElement(s.c,{style:{float:"right"},size:"sm",color:"danger",onClick:function(){return E(e._id)}},"Delete"),r.a.createElement(s.c,{style:{float:"right"},size:"sm",color:"success"},r.a.createElement(l.b,{style:{color:"white"},to:"/admin/product/update/".concat(e._id)},"Update")))})))))};function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var he=function(e){var t=e.match,n=Object(a.useState)({name:"",email:"",password:"",error:"",success:!1}),c=Object(u.a)(n,2),o=c[0],l=c[1],f=o.name,E=o.email,h=o.password,g=o.success,y=p().token,O=function(e){(function(e,t){return fetch("".concat(m,"/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})})(e,y).then(function(e){e.err?l(Ee({},o,{error:!0})):l(Ee({},o,{name:e.name,email:e.email}))})};Object(a.useEffect)(function(){O(t.params.userId)},[]);var v=function(e){l(Ee({},o,Object(d.a)({error:!1},e.target.name,e.target.value)))},j=function(e){e.preventDefault(),function(e,t,n){return fetch("".concat(m,"/user/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(n)}).then(function(e){return e.json()}).catch(function(e){return console.error(e)})}(t.params.userId,y,{name:f,email:E,password:h}).then(function(e){e.err?console.log(e.err):function(e,t){if("undefined"!==typeof window&&localStorage.getItem("jwt")){var n=JSON.parse(localStorage.getItem("jwt"));n.user=e,localStorage.setItem("jwt",JSON.stringify(n)),t()}}(e,function(){l(Ee({},o,{name:e.name,email:e.email,success:!0}))})})};return r.a.createElement(b,{title:"Profile",description:"Update profile"},r.a.createElement("h2",null,"Profile"),function(e,t,n){return r.a.createElement(s.A,null,r.a.createElement(s.i,{md:"6"},r.a.createElement(s.d,null,r.a.createElement(s.e,null,r.a.createElement("form",null,r.a.createElement("p",{className:"h4 text-center py-4"},"Your profile"),r.a.createElement("label",{htmlFor:"defaultFormCardNameEx",className:"grey-text font-weight-light"},"Your name"),r.a.createElement("input",{type:"text",id:"defaultFormCardNameEx",className:"form-control",name:"name",value:e,onChange:v}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"defaultFormCardEmailEx",className:"grey-text font-weight-light"},"Your email"),r.a.createElement("input",{type:"email",id:"defaultFormCardEmailEx",className:"form-control",name:"email",value:t,onChange:v}),r.a.createElement("br",null),r.a.createElement("label",{htmlFor:"defaultFormCardEmailEx",className:"grey-text font-weight-light"},"Password"),r.a.createElement("input",{type:"password",id:"defaultFormCardEmailEx",className:"form-control",name:"password",value:h,onChange:v}),r.a.createElement("div",{className:"text-center py-4 mt-3"},r.a.createElement(s.c,{onClick:j,className:"btn btn-outline-purple",type:"submit"},"Send",r.a.createElement(s.p,{far:!0,icon:"paper-plane",className:"ml-2"}))))))))}(f,E),function(e){if(e)return r.a.createElement(i.a,{to:"/cart"})}(g))},ge=function(){return r.a.createElement(l.a,null,r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/",exact:!0,component:_}),r.a.createElement(i.b,{path:"/shop",exact:!0,component:re}),r.a.createElement(i.b,{path:"/signin",exact:!0,component:q}),r.a.createElement(i.b,{path:"/signup",exact:!0,component:G}),r.a.createElement(i.b,{path:"/cart",exact:!0,component:me}),r.a.createElement(i.b,{path:"/product/:id",exact:!0,component:ce}),r.a.createElement(U,{path:"/user/dashboard",exact:!0,component:R}),r.a.createElement(U,{path:"/profile/:userId",exact:!0,component:he}),r.a.createElement(L,{path:"/admin/dashboard",exact:!0,component:Y}),r.a.createElement(L,{path:"/category/create",exact:!0,component:W}),r.a.createElement(L,{path:"/product/create/:userId",exact:!0,component:H}),r.a.createElement(L,{path:"/admin/product/update/:productId",exact:!0,component:X}),r.a.createElement(L,{path:"/admin/orders",exact:!0,component:pe}),r.a.createElement(L,{path:"/admin/products",exact:!0,component:de})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(90),n(91),n(92),n(93);o.a.render(r.a.createElement(ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[39,1,2]]]);
//# sourceMappingURL=main.eddbdf15.chunk.js.map